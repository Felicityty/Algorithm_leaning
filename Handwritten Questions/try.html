<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

</head>

<body>
  <img src="lazyLoadPics/loading.gif" data-src="lazyLoadPics/banner1.png" alt="">
  <img src="lazyLoadPics/loading.gif" data-src="lazyLoadPics/banner2.png" alt="">
  <img src="lazyLoadPics/loading.gif" data-src="lazyLoadPics/banner3.png" alt="">
  <img src="lazyLoadPics/loading.gif" data-src="lazyLoadPics/banner4.png" alt="">
  <img src="lazyLoadPics/loading.gif" data-src="lazyLoadPics/banner5.png" alt="">
</body>
<style>
  img {
    display: block;
    width: 500px;
    height: 500px;
  }
</style>

</html>

<script>
  let img = document.getElementsByTagName('img')
  console.log('img', img)
  let index = 0
  function lazyLoad() {
    let innerHeight = window.innerHeight
    console.log('innerHeight', innerHeight)
    let scrollTop = document.documentElement.scrollTop
    console.log('scrollTop', scrollTop)
    for (let i = index; i < img.length; i++) {
      // 这里涉及js判断图片是否在视口内
      // if (img[i].offsetTop < innerHeight + scrollTop) {
      if (img[i].getBoundingClientRect().top < innerHeight) {
        if (img[i].getAttribute('src')) {
          img[i].src = img[i].getAttribute('data-src')
        }
        index = i + 1
      }
    }
  }
  function throttle(fn, delay) {
    let flag = true
    return function () {
      let args = arguments
      if (flag) {
        setTimeout(() => {
          // fn.apply(this, args)
          fn.call(this)
          flag = true
        }, delay)
      }
      flag = false
    }
  }
  lazyLoad()
  window.addEventListener('scroll', throttle(lazyLoad, 200))
</script>