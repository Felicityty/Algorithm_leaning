<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script>
    const nums = [1,3,-1,-3,5,3,6,7], k = 3
    var maxSlidingWindow = function (nums, k) {
      const n = nums.length
      let q = new Array()
      // 先让前k个元素试着进栈
      for (let i = 0; i < k; i++) {
        while (q.length && nums[i] >= nums[q[q.length - 1]]) {
          q.pop()
        }
        q.push(i)
      }
      console.log(q);
      let num = 1
      // 前k个只要取最大的那个加入到结果数组就行
      // 之后才是每新进一个元素 输出当前的最大加大结果数组
      const res = [nums[q[0]]]
      for (let i = k; i < n; i++) {
        console.log(num++);
        while (q.length && nums[i] >= nums[q[q.length - 1]]) {
          q.pop()
        }
        q.push(i)
        console.log(q);

        // 把下面的式子扭转一下 是当i-q[0]>=k的时候 就把开头元素弹出
        // 保证栈中的下标都是和当前下标i差k的下标
        while (q[0] <= i - k) {
          // 删除数组开头的元素
          q.shift()
        }
        res.push(nums[q[0]])
        console.log(q);
        console.log('res', res);
      }
      return res
    };

    console.log(maxSlidingWindow(nums, k));

  </script>
</head>

<body>

</body>

</html>